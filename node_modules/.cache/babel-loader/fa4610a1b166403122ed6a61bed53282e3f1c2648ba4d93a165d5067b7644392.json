{"ast":null,"code":"import { createStore } from \"vuex\";\nimport { ethers } from 'ethers';\nimport { USER_PROFILE_ABI } from \"@/contracts/UserProfile.abi.js\";\nimport { SKILL_CONFIRMATION_ABI } from \"@/contracts/SkillConfirmation.abi.js\";\nimport { SKILL_RATING_ABI } from \"@/contracts/SkillRating.abi.js\";\nimport { TRUST_NETWORK_ABI } from \"@/contracts/TrustNetwork.abi.js\";\nconst skillConfirmationAddress = \"\";\nconst userProfileAddress = \"\";\nconst skillRatingAddress = \"\";\nconst trustNetworkAddress = \"\";\nexport default createStore({\n  state: {\n    web3Wallet: {},\n    wallet: {\n      address: \"\",\n      chainId: \"\",\n      chain: \"\"\n    },\n    contractAddress: \"\",\n    UserProfileContract: {},\n    SkillConfirmationContract: {},\n    SkillRatingContract: {},\n    TrusNetworkContract: {},\n    userProfile: null,\n    skillRequests: [],\n    skillRatings: {}\n  },\n  getters: {},\n  mutations: {},\n  actions: {\n    // async getTransaction({state}, transactionHash){\n    //   state.web3Wallet = new Web3(window.ethereum)\n    //   return await state.web3Wallet.eth.getTransaction(transactionHash)\n    // },\n    // async sendTransaction({state}, to, value){\n    //   value = state.web3Wallet.utils.numberToHex(value)\n    //   await window.ethereum.request({\n    //     method: \"eth_sendTransaction\",\n    //     params: [{\n    //     from: state.wallet.address,\n    //     to: to,\n    //     value: value\n    //     }]\n    //     }).then(hash => {\n    //       state.txHash = hash\n    //       })\n    // },\n\n    //   async setStr({state}, str){\n    //     let txData = state.myContract.methods.setStr(str).encodeABI()\n\n    //     await window.ethereum.request({\n    //       method: \"eth_sendTransaction\",\n    //       params: [{\n    //         from: state.wallet.address,\n    //         to: state.contractAddress,\n    //         data: txData\n    //       }]\n    //       }).then(hash => {\n    //         state.txHash = hash\n    //         })\n    // },\n\n    // async getX({state}){\n    //   console.log(state.contractAddress)\n    //   return await state.myContract.methods.x().call({from: state.wallet.address}).then(hash => {\n    //     state.txHash = hash\n    //     })\n    // },\n    // Действия для взаимодействия с контрактами Ethereum\n    async createProfile({\n      commit,\n      state\n    }, profileData) {\n      const txData = await state.UserProfileContract.methods.createProfile(profileData).encodeABI();\n      const tx = await window.ethereum.request({\n        method: \"eth_sendTransaction\",\n        params: [{\n          from: state.wallet.address,\n          to: state.userProfileAddress,\n          data: txData\n        }]\n      }).then(hash => {\n        state.txHash = hash;\n      });\n      await tx.wait();\n      // Установить userProfile в ответе транзакции\n      state.userProfile = tx.hash;\n      return true;\n    },\n    async requestConfirmation({\n      commit\n    }, {\n      confirmatorAddress,\n      skillName\n    }) {\n      const tx = await skillConfirmationContract.requestConfirmation(confirmatorAddress, skillName);\n      await tx.wait();\n\n      // Обновить skillRequests после успешной транзакции\n      const requests = await skillConfirmationContract.getSkillRequestsByAddress(confirmatorAddress);\n      commit(\"setSkillRequests\", requests);\n      return true;\n    },\n    async confirmSkill({\n      commit\n    }, requestIndex) {\n      try {\n        const tx = await skillConfirmationContract.confirmSkill(requestIndex);\n        await tx.wait();\n        // Обновить skillRequests после успешной транзакции\n        const requests = await skillConfirmationContract.getSkillRequestsByAddress(signer.getAddress());\n        commit(\"setSkillRequests\", requests);\n        return true;\n      } catch (error) {\n        console.error(\"Error confirming skill:\", error);\n        return false;\n      }\n    },\n    async rateSkill({\n      commit\n    }, {\n      skillName,\n      rating,\n      comment\n    }) {\n      try {\n        const tx = await skillRatingContract.rateSkill(skillName, rating, comment);\n        await tx.wait();\n        // Обновить skillRatings после успешной транзакции\n        const ratings = await skillRatingContract.getSkillRatingsByName(skillName);\n        commit(\"setSkillRatings\", {\n          skillName,\n          ratings\n        });\n        return true;\n      } catch (error) {\n        console.error(\"Error rating skill:\", error);\n        return false;\n      }\n    },\n    async fetchUserProfile({\n      commit\n    }, address) {\n      try {\n        const profile = await userProfileContract.getUserProfile(address);\n        commit(\"setUserProfile\", profile);\n      } catch (error) {\n        console.error(\"Error fetching user profile:\", error);\n      }\n    },\n    async fetchSkillRequests({\n      commit\n    }, address) {\n      try {\n        const requests = await skillConfirmationContract.getSkillRequestsByAddress(address);\n        commit(\"setSkillRequests\", requests);\n      } catch (error) {\n        console.error(\"Error fetching skill requests:\", error);\n      }\n    },\n    async fetchSkillRatings({\n      commit\n    }, skillName) {\n      try {\n        const ratings = await skillRatingContract.getSkillRatingsByName(skillName);\n        commit(\"setSkillRatings\", {\n          skillName,\n          ratings\n        });\n      } catch (error) {\n        console.error(\"Error fetching skill ratings:\", error);\n      }\n    }\n  },\n  modules: {}\n});","map":{"version":3,"names":["createStore","ethers","USER_PROFILE_ABI","SKILL_CONFIRMATION_ABI","SKILL_RATING_ABI","TRUST_NETWORK_ABI","skillConfirmationAddress","userProfileAddress","skillRatingAddress","trustNetworkAddress","state","web3Wallet","wallet","address","chainId","chain","contractAddress","UserProfileContract","SkillConfirmationContract","SkillRatingContract","TrusNetworkContract","userProfile","skillRequests","skillRatings","getters","mutations","actions","createProfile","commit","profileData","txData","methods","encodeABI","tx","window","ethereum","request","method","params","from","to","data","then","hash","txHash","wait","requestConfirmation","confirmatorAddress","skillName","skillConfirmationContract","requests","getSkillRequestsByAddress","confirmSkill","requestIndex","signer","getAddress","error","console","rateSkill","rating","comment","skillRatingContract","ratings","getSkillRatingsByName","fetchUserProfile","profile","userProfileContract","getUserProfile","fetchSkillRequests","fetchSkillRatings","modules"],"sources":["/home/alan/VisualStudioProjects/BU/vue-proj1/src/store/index.js"],"sourcesContent":["import {createStore} from \"vuex\"\nimport { ethers } from 'ethers';\n\nimport {USER_PROFILE_ABI} from \"@/contracts/UserProfile.abi.js\"\nimport {SKILL_CONFIRMATION_ABI} from \"@/contracts/SkillConfirmation.abi.js\"\nimport {SKILL_RATING_ABI} from \"@/contracts/SkillRating.abi.js\"\nimport {TRUST_NETWORK_ABI} from \"@/contracts/TrustNetwork.abi.js\"\n\n\nconst skillConfirmationAddress = \"\"\nconst userProfileAddress = \"\"\nconst skillRatingAddress = \"\"\nconst trustNetworkAddress = \"\"\n\nexport default createStore({\n  state:{\n    web3Wallet: {},\n    wallet: {\n      address: \"\",\n      chainId: \"\",\n      chain: \"\"\n    },\n    contractAddress: \"\",\n\n    UserProfileContract: {},\n    SkillConfirmationContract: {},\n    SkillRatingContract: {},\n    TrusNetworkContract: {},\n\n    \n    userProfile: null,\n    skillRequests: [],\n    skillRatings: {},\n  },\n\n  getters:{\n  },\n\n  mutations:{\n  },\n\n  actions:{\n    \n\n\n\n\n    \n    // async getTransaction({state}, transactionHash){\n    //   state.web3Wallet = new Web3(window.ethereum)\n    //   return await state.web3Wallet.eth.getTransaction(transactionHash)\n    // },\n    // async sendTransaction({state}, to, value){\n    //   value = state.web3Wallet.utils.numberToHex(value)\n    //   await window.ethereum.request({\n    //     method: \"eth_sendTransaction\",\n    //     params: [{\n    //     from: state.wallet.address,\n    //     to: to,\n    //     value: value\n    //     }]\n    //     }).then(hash => {\n    //       state.txHash = hash\n    //       })\n    // },\n\n  //   async setStr({state}, str){\n  //     let txData = state.myContract.methods.setStr(str).encodeABI()\n\n  //     await window.ethereum.request({\n  //       method: \"eth_sendTransaction\",\n  //       params: [{\n  //         from: state.wallet.address,\n  //         to: state.contractAddress,\n  //         data: txData\n  //       }]\n  //       }).then(hash => {\n  //         state.txHash = hash\n  //         })\n  // },\n\n  // async getX({state}){\n  //   console.log(state.contractAddress)\n  //   return await state.myContract.methods.x().call({from: state.wallet.address}).then(hash => {\n  //     state.txHash = hash\n  //     })\n  // },\n    // Действия для взаимодействия с контрактами Ethereum\n    async createProfile({ commit, state }, profileData) {\n        const txData = await state.UserProfileContract.methods.createProfile(profileData).encodeABI();\n      const tx = await window.ethereum.request({\n        method: \"eth_sendTransaction\",\n        params: [{\n          from: state.wallet.address,\n          to: state.userProfileAddress,\n          data: txData\n        }]\n        }).then(hash => {\n          state.txHash = hash\n          })\n      \n        await tx.wait();\n        // Установить userProfile в ответе транзакции\n        state.userProfile = tx.hash\n        return true;\n      },\n    async requestConfirmation({ commit }, { confirmatorAddress, skillName }) {\n        const tx = await skillConfirmationContract.requestConfirmation(confirmatorAddress, skillName);\n        await tx.wait();\n\n        // Обновить skillRequests после успешной транзакции\n        const requests = await skillConfirmationContract.getSkillRequestsByAddress(confirmatorAddress);\n        commit(\"setSkillRequests\", requests);\n        return true;\n      \n    },\n    async confirmSkill({ commit }, requestIndex) {\n      try {\n        const tx = await skillConfirmationContract.confirmSkill(requestIndex);\n        await tx.wait();\n        // Обновить skillRequests после успешной транзакции\n        const requests = await skillConfirmationContract.getSkillRequestsByAddress(signer.getAddress());\n        commit(\"setSkillRequests\", requests);\n        return true;\n      } catch (error) {\n        console.error(\"Error confirming skill:\", error);\n        return false;\n      }\n    },\n    async rateSkill({ commit }, { skillName, rating, comment }) {\n      try {\n        const tx = await skillRatingContract.rateSkill(skillName, rating, comment);\n        await tx.wait();\n        // Обновить skillRatings после успешной транзакции\n        const ratings = await skillRatingContract.getSkillRatingsByName(skillName);\n        commit(\"setSkillRatings\", { skillName, ratings });\n        return true;\n      } catch (error) {\n        console.error(\"Error rating skill:\", error);\n        return false;\n      }\n    },\n    async fetchUserProfile({ commit }, address) {\n      try {\n        const profile = await userProfileContract.getUserProfile(address);\n        commit(\"setUserProfile\", profile);\n      } catch (error) {\n        console.error(\"Error fetching user profile:\", error);\n      }\n    },\n    async fetchSkillRequests({ commit }, address) {\n      try {\n        const requests = await skillConfirmationContract.getSkillRequestsByAddress(address);\n        commit(\"setSkillRequests\", requests);\n      } catch (error) {\n        console.error(\"Error fetching skill requests:\", error);\n      }\n    },\n    async fetchSkillRatings({ commit }, skillName) {\n      try {\n        const ratings = await skillRatingContract.getSkillRatingsByName(skillName);\n        commit(\"setSkillRatings\", { skillName, ratings });\n      } catch (error) {\n        console.error(\"Error fetching skill ratings:\", error);\n      }\n    },\n  },\n\n  modules:{\n\n  }\n})"],"mappings":"AAAA,SAAQA,WAAW,QAAO,MAAM;AAChC,SAASC,MAAM,QAAQ,QAAQ;AAE/B,SAAQC,gBAAgB,QAAO,gCAAgC;AAC/D,SAAQC,sBAAsB,QAAO,sCAAsC;AAC3E,SAAQC,gBAAgB,QAAO,gCAAgC;AAC/D,SAAQC,iBAAiB,QAAO,iCAAiC;AAGjE,MAAMC,wBAAwB,GAAG,EAAE;AACnC,MAAMC,kBAAkB,GAAG,EAAE;AAC7B,MAAMC,kBAAkB,GAAG,EAAE;AAC7B,MAAMC,mBAAmB,GAAG,EAAE;AAE9B,eAAeT,WAAW,CAAC;EACzBU,KAAK,EAAC;IACJC,UAAU,EAAE,CAAC,CAAC;IACdC,MAAM,EAAE;MACNC,OAAO,EAAE,EAAE;MACXC,OAAO,EAAE,EAAE;MACXC,KAAK,EAAE;IACT,CAAC;IACDC,eAAe,EAAE,EAAE;IAEnBC,mBAAmB,EAAE,CAAC,CAAC;IACvBC,yBAAyB,EAAE,CAAC,CAAC;IAC7BC,mBAAmB,EAAE,CAAC,CAAC;IACvBC,mBAAmB,EAAE,CAAC,CAAC;IAGvBC,WAAW,EAAE,IAAI;IACjBC,aAAa,EAAE,EAAE;IACjBC,YAAY,EAAE,CAAC;EACjB,CAAC;EAEDC,OAAO,EAAC,CACR,CAAC;EAEDC,SAAS,EAAC,CACV,CAAC;EAEDC,OAAO,EAAC;IAON;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEF;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACE;IACA,MAAMC,aAAaA,CAAC;MAAEC,MAAM;MAAElB;IAAM,CAAC,EAAEmB,WAAW,EAAE;MAChD,MAAMC,MAAM,GAAG,MAAMpB,KAAK,CAACO,mBAAmB,CAACc,OAAO,CAACJ,aAAa,CAACE,WAAW,CAAC,CAACG,SAAS,EAAE;MAC/F,MAAMC,EAAE,GAAG,MAAMC,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC;QACvCC,MAAM,EAAE,qBAAqB;QAC7BC,MAAM,EAAE,CAAC;UACPC,IAAI,EAAE7B,KAAK,CAACE,MAAM,CAACC,OAAO;UAC1B2B,EAAE,EAAE9B,KAAK,CAACH,kBAAkB;UAC5BkC,IAAI,EAAEX;QACR,CAAC;MACD,CAAC,CAAC,CAACY,IAAI,CAACC,IAAI,IAAI;QACdjC,KAAK,CAACkC,MAAM,GAAGD,IAAI;MACnB,CAAC,CAAC;MAEJ,MAAMV,EAAE,CAACY,IAAI,EAAE;MACf;MACAnC,KAAK,CAACW,WAAW,GAAGY,EAAE,CAACU,IAAI;MAC3B,OAAO,IAAI;IACb,CAAC;IACH,MAAMG,mBAAmBA,CAAC;MAAElB;IAAO,CAAC,EAAE;MAAEmB,kBAAkB;MAAEC;IAAU,CAAC,EAAE;MACrE,MAAMf,EAAE,GAAG,MAAMgB,yBAAyB,CAACH,mBAAmB,CAACC,kBAAkB,EAAEC,SAAS,CAAC;MAC7F,MAAMf,EAAE,CAACY,IAAI,EAAE;;MAEf;MACA,MAAMK,QAAQ,GAAG,MAAMD,yBAAyB,CAACE,yBAAyB,CAACJ,kBAAkB,CAAC;MAC9FnB,MAAM,CAAC,kBAAkB,EAAEsB,QAAQ,CAAC;MACpC,OAAO,IAAI;IAEf,CAAC;IACD,MAAME,YAAYA,CAAC;MAAExB;IAAO,CAAC,EAAEyB,YAAY,EAAE;MAC3C,IAAI;QACF,MAAMpB,EAAE,GAAG,MAAMgB,yBAAyB,CAACG,YAAY,CAACC,YAAY,CAAC;QACrE,MAAMpB,EAAE,CAACY,IAAI,EAAE;QACf;QACA,MAAMK,QAAQ,GAAG,MAAMD,yBAAyB,CAACE,yBAAyB,CAACG,MAAM,CAACC,UAAU,EAAE,CAAC;QAC/F3B,MAAM,CAAC,kBAAkB,EAAEsB,QAAQ,CAAC;QACpC,OAAO,IAAI;MACb,CAAC,CAAC,OAAOM,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/C,OAAO,KAAK;MACd;IACF,CAAC;IACD,MAAME,SAASA,CAAC;MAAE9B;IAAO,CAAC,EAAE;MAAEoB,SAAS;MAAEW,MAAM;MAAEC;IAAQ,CAAC,EAAE;MAC1D,IAAI;QACF,MAAM3B,EAAE,GAAG,MAAM4B,mBAAmB,CAACH,SAAS,CAACV,SAAS,EAAEW,MAAM,EAAEC,OAAO,CAAC;QAC1E,MAAM3B,EAAE,CAACY,IAAI,EAAE;QACf;QACA,MAAMiB,OAAO,GAAG,MAAMD,mBAAmB,CAACE,qBAAqB,CAACf,SAAS,CAAC;QAC1EpB,MAAM,CAAC,iBAAiB,EAAE;UAAEoB,SAAS;UAAEc;QAAQ,CAAC,CAAC;QACjD,OAAO,IAAI;MACb,CAAC,CAAC,OAAON,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAC3C,OAAO,KAAK;MACd;IACF,CAAC;IACD,MAAMQ,gBAAgBA,CAAC;MAAEpC;IAAO,CAAC,EAAEf,OAAO,EAAE;MAC1C,IAAI;QACF,MAAMoD,OAAO,GAAG,MAAMC,mBAAmB,CAACC,cAAc,CAACtD,OAAO,CAAC;QACjEe,MAAM,CAAC,gBAAgB,EAAEqC,OAAO,CAAC;MACnC,CAAC,CAAC,OAAOT,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD;IACF,CAAC;IACD,MAAMY,kBAAkBA,CAAC;MAAExC;IAAO,CAAC,EAAEf,OAAO,EAAE;MAC5C,IAAI;QACF,MAAMqC,QAAQ,GAAG,MAAMD,yBAAyB,CAACE,yBAAyB,CAACtC,OAAO,CAAC;QACnFe,MAAM,CAAC,kBAAkB,EAAEsB,QAAQ,CAAC;MACtC,CAAC,CAAC,OAAOM,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACxD;IACF,CAAC;IACD,MAAMa,iBAAiBA,CAAC;MAAEzC;IAAO,CAAC,EAAEoB,SAAS,EAAE;MAC7C,IAAI;QACF,MAAMc,OAAO,GAAG,MAAMD,mBAAmB,CAACE,qBAAqB,CAACf,SAAS,CAAC;QAC1EpB,MAAM,CAAC,iBAAiB,EAAE;UAAEoB,SAAS;UAAEc;QAAQ,CAAC,CAAC;MACnD,CAAC,CAAC,OAAON,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACvD;IACF;EACF,CAAC;EAEDc,OAAO,EAAC,CAER;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}