{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDefaultProvider = void 0;\nconst index_js_1 = require(\"../utils/index.js\");\nconst provider_ankr_js_1 = require(\"./provider-ankr.js\");\nconst provider_alchemy_js_1 = require(\"./provider-alchemy.js\");\nconst provider_cloudflare_js_1 = require(\"./provider-cloudflare.js\");\nconst provider_etherscan_js_1 = require(\"./provider-etherscan.js\");\nconst provider_infura_js_1 = require(\"./provider-infura.js\");\n//import { PocketProvider } from \"./provider-pocket.js\";\nconst provider_quicknode_js_1 = require(\"./provider-quicknode.js\");\nconst provider_fallback_js_1 = require(\"./provider-fallback.js\");\nconst provider_jsonrpc_js_1 = require(\"./provider-jsonrpc.js\");\nconst provider_websocket_js_1 = require(\"./provider-websocket.js\");\nfunction isWebSocketLike(value) {\n  return value && typeof value.send === \"function\" && typeof value.close === \"function\";\n}\nfunction getDefaultProvider(network, options) {\n  if (options == null) {\n    options = {};\n  }\n  if (typeof network === \"string\" && network.match(/^https?:/)) {\n    return new provider_jsonrpc_js_1.JsonRpcProvider(network);\n  }\n  if (typeof network === \"string\" && network.match(/^wss?:/) || isWebSocketLike(network)) {\n    return new provider_websocket_js_1.WebSocketProvider(network);\n  }\n  const providers = [];\n  if (options.alchemy !== \"-\") {\n    try {\n      providers.push(new provider_alchemy_js_1.AlchemyProvider(network, options.alchemy));\n    } catch (error) {}\n  }\n  if (options.ankr !== \"-\" && options.ankr != null) {\n    try {\n      providers.push(new provider_ankr_js_1.AnkrProvider(network, options.ankr));\n    } catch (error) {}\n  }\n  if (options.cloudflare !== \"-\") {\n    try {\n      providers.push(new provider_cloudflare_js_1.CloudflareProvider(network));\n    } catch (error) {}\n  }\n  if (options.etherscan !== \"-\") {\n    try {\n      providers.push(new provider_etherscan_js_1.EtherscanProvider(network, options.etherscan));\n    } catch (error) {}\n  }\n  if (options.infura !== \"-\") {\n    try {\n      let projectId = options.infura;\n      let projectSecret = undefined;\n      if (typeof projectId === \"object\") {\n        projectSecret = projectId.projectSecret;\n        projectId = projectId.projectId;\n      }\n      providers.push(new provider_infura_js_1.InfuraProvider(network, projectId, projectSecret));\n    } catch (error) {}\n  }\n  /*\n      if (options.pocket !== \"-\") {\n          try {\n              let appId = options.pocket;\n              let secretKey: undefined | string = undefined;\n              let loadBalancer: undefined | boolean = undefined;\n              if (typeof(appId) === \"object\") {\n                  loadBalancer = !!appId.loadBalancer;\n                  secretKey = appId.secretKey;\n                  appId = appId.appId;\n              }\n              providers.push(new PocketProvider(network, appId, secretKey, loadBalancer));\n          } catch (error) { console.log(error); }\n      }\n  */\n  if (options.quicknode !== \"-\") {\n    try {\n      let token = options.quicknode;\n      providers.push(new provider_quicknode_js_1.QuickNodeProvider(network, token));\n    } catch (error) {}\n  }\n  (0, index_js_1.assert)(providers.length, \"unsupported default network\", \"UNSUPPORTED_OPERATION\", {\n    operation: \"getDefaultProvider\"\n  });\n  if (providers.length === 1) {\n    return providers[0];\n  }\n  return new provider_fallback_js_1.FallbackProvider(providers);\n}\nexports.getDefaultProvider = getDefaultProvider;","map":{"version":3,"sources":["../../src.ts/providers/default-provider.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getDefaultProvider = void 0;\nconst index_js_1 = require(\"../utils/index.js\");\nconst provider_ankr_js_1 = require(\"./provider-ankr.js\");\nconst provider_alchemy_js_1 = require(\"./provider-alchemy.js\");\nconst provider_cloudflare_js_1 = require(\"./provider-cloudflare.js\");\nconst provider_etherscan_js_1 = require(\"./provider-etherscan.js\");\nconst provider_infura_js_1 = require(\"./provider-infura.js\");\n//import { PocketProvider } from \"./provider-pocket.js\";\nconst provider_quicknode_js_1 = require(\"./provider-quicknode.js\");\nconst provider_fallback_js_1 = require(\"./provider-fallback.js\");\nconst provider_jsonrpc_js_1 = require(\"./provider-jsonrpc.js\");\nconst provider_websocket_js_1 = require(\"./provider-websocket.js\");\nfunction isWebSocketLike(value) {\n    return (value && typeof (value.send) === \"function\" &&\n        typeof (value.close) === \"function\");\n}\nfunction getDefaultProvider(network, options) {\n    if (options == null) {\n        options = {};\n    }\n    if (typeof (network) === \"string\" && network.match(/^https?:/)) {\n        return new provider_jsonrpc_js_1.JsonRpcProvider(network);\n    }\n    if (typeof (network) === \"string\" && network.match(/^wss?:/) || isWebSocketLike(network)) {\n        return new provider_websocket_js_1.WebSocketProvider(network);\n    }\n    const providers = [];\n    if (options.alchemy !== \"-\") {\n        try {\n            providers.push(new provider_alchemy_js_1.AlchemyProvider(network, options.alchemy));\n        }\n        catch (error) { }\n    }\n    if (options.ankr !== \"-\" && options.ankr != null) {\n        try {\n            providers.push(new provider_ankr_js_1.AnkrProvider(network, options.ankr));\n        }\n        catch (error) { }\n    }\n    if (options.cloudflare !== \"-\") {\n        try {\n            providers.push(new provider_cloudflare_js_1.CloudflareProvider(network));\n        }\n        catch (error) { }\n    }\n    if (options.etherscan !== \"-\") {\n        try {\n            providers.push(new provider_etherscan_js_1.EtherscanProvider(network, options.etherscan));\n        }\n        catch (error) { }\n    }\n    if (options.infura !== \"-\") {\n        try {\n            let projectId = options.infura;\n            let projectSecret = undefined;\n            if (typeof (projectId) === \"object\") {\n                projectSecret = projectId.projectSecret;\n                projectId = projectId.projectId;\n            }\n            providers.push(new provider_infura_js_1.InfuraProvider(network, projectId, projectSecret));\n        }\n        catch (error) { }\n    }\n    /*\n        if (options.pocket !== \"-\") {\n            try {\n                let appId = options.pocket;\n                let secretKey: undefined | string = undefined;\n                let loadBalancer: undefined | boolean = undefined;\n                if (typeof(appId) === \"object\") {\n                    loadBalancer = !!appId.loadBalancer;\n                    secretKey = appId.secretKey;\n                    appId = appId.appId;\n                }\n                providers.push(new PocketProvider(network, appId, secretKey, loadBalancer));\n            } catch (error) { console.log(error); }\n        }\n    */\n    if (options.quicknode !== \"-\") {\n        try {\n            let token = options.quicknode;\n            providers.push(new provider_quicknode_js_1.QuickNodeProvider(network, token));\n        }\n        catch (error) { }\n    }\n    (0, index_js_1.assert)(providers.length, \"unsupported default network\", \"UNSUPPORTED_OPERATION\", {\n        operation: \"getDefaultProvider\"\n    });\n    if (providers.length === 1) {\n        return providers[0];\n    }\n    return new provider_fallback_js_1.FallbackProvider(providers);\n}\nexports.getDefaultProvider = getDefaultProvider;\n//# sourceMappingURL=default-provider.js.map"]},"metadata":{},"sourceType":"script","externalDependencies":[]}